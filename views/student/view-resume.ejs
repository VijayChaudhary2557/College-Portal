<%- include('../partials/header') %>

<% if (!resume) { %>
  <div class="max-w-xl mx-auto mt-20 bg-white p-6 text-center shadow">
    <p class="text-lg font-semibold">Resume not found</p>
    <a href="/student/resume" class="action-btn mt-4 inline-block">
      Create Resume
    </a>
  </div>
<% } else { %>

  <div class="bg-gray-200 py-10 print:bg-white print:py-0">
    <div class="max-w-4xl mx-auto bg-white p-8 shadow-lg print:shadow-none print:p-0"
         style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333;">

      <!-- ACTION BAR -->
      <div class="flex justify-end gap-3 mb-6 print:hidden">
        <button onclick="window.print()" class="action-btn">Download PDF</button>
        <a href="/student/resume" class="action-btn-outline">Edit Resume</a>
      </div>

      <!-- HEADER -->
      <div class="text-center mb-6">
        <h1 class="text-4xl font-bold text-gray-800 uppercase tracking-tight">
          <%= resume.fullName %>
        </h1>

        <p class="font-bold text-lg text-gray-700 mt-1 uppercase">
          <%= resume.jobTitle %>
        </p>

        <% if (resume.location) { %>
          <p class="text-sm mt-2 text-gray-600"><%= resume.location %></p>
        <% } %>

        <div class="flex justify-center items-center gap-6 mt-3 text-sm">
          <% if (resume.phone) { %>
            <span>ğŸ“ <%= resume.phone %></span>
          <% } %>
          <% if (resume.email) { %>
            <span>âœ‰ï¸ <%= resume.email %></span>
          <% } %>
        </div>

        <div class="flex justify-center items-center gap-4 mt-2 text-xs">
        <% if (resume.links && resume.links.github) { %>
          <a href="<%= resume.links.github %>" target="_blank"
             class="flex items-center gap-1 underline italic">
             ğŸ”— GitHub
          </a>
        <% } %>

        <% if (resume.links && resume.links.linkedin) { %>
          <a href="<%= resume.links.linkedin %>" target="_blank"
             class="flex items-center gap-1 underline italic">
             ğŸ”— LinkedIn
          </a>
        <% } %>

        <% if (resume.links && resume.links.portfolio) { %>
          <a href="<%= resume.links.portfolio %>" target="_blank"
             class="flex items-center gap-1 underline italic">
             ğŸ”— Portfolio
          </a>
        <% } %>
      </div>
      
      <!-- LINKS (future-ready) -->
      <% if (resume.github || resume.linkedin || resume.portfolio) { %>
      <div class="flex justify-center items-center gap-4 mt-2 text-xs">
        <% if (resume.github) { %>
          <a href="<%= resume.github %>" target="_blank" class="underline italic">ğŸ”— GitHub</a>
        <% } %>
        <% if (resume.linkedin) { %>
          <a href="<%= resume.linkedin %>" target="_blank" class="underline italic">ğŸ”— LinkedIn</a>
        <% } %>
        <% if (resume.portfolio) { %>
          <a href="<%= resume.portfolio %>" target="_blank" class="underline italic">ğŸ”— Portfolio</a>
        <% } %>
      </div>
      <% } %>
    </div>

    <!-- SUMMARY -->
    <% if (resume.professionalSummary) { %>
    <section class="mb-6">
      <h2 class="section-header-bar">SUMMARY</h2>
      <p class="text-sm leading-snug px-2">
        <%= resume.professionalSummary %>
      </p>
    </section>
    <% } %>

    <!-- SKILLS -->
    <% if (resume.skills && resume.skills.length) { %>
    <section class="mb-6">
      <h2 class="section-header-bar">TECHNICAL SKILLS</h2>
      <div class="grid grid-cols-3 gap-y-1 px-4">
        <% resume.skills.forEach(skill => { %>
          <div class="text-sm">â€¢ <%= skill %></div>
        <% }) %>
      </div>
    </section>
    <% } %>

    <!-- EDUCATION -->
    <% if (resume.education && resume.education.length) { %>
    <section class="mb-6">
      <h2 class="section-header-bar">EDUCATION</h2>
      <% resume.education.forEach(edu => { %>
        <div class="flex justify-between items-start mb-3 px-2">
          <div>
            <p class="font-bold text-sm"><%= edu.institute %></p>
            <p class="text-sm italic"><%= edu.degree %></p>
          </div>
          <p class="font-bold text-sm"><%= edu.year %></p>
        </div>
      <% }) %>
    </section>
    <% } %>

    <!-- PROJECTS -->
    <% if (resume.projects && resume.projects.length) { %>
    <section class="mb-6">
      <h2 class="section-header-bar">PROJECTS</h2>
      <% resume.projects.forEach(project => { %>
        <div class="mb-4 px-2">
          <p class="font-bold text-sm"><%= project.title %></p>
          <ul class="list-disc ml-5 text-sm mt-1 space-y-1">
            <li><%= project.description %></li>
          </ul>
        </div>
      <% }) %>
    </section>
    <% } %>

    <!-- EXPERIENCE -->
    <% if (resume.experience && resume.experience.length) { %>
    <section class="mb-6">
      <h2 class="section-header-bar">EXPERIENCE</h2>
      <% resume.experience.forEach(exp => { %>
        <div class="mb-3 px-2">
          <p class="font-bold text-sm"><%= exp.role %> â€“ <%= exp.company %></p>
          <p class="text-sm"><%= exp.description %></p>
        </div>
      <% }) %>
    </section>
    <% } %>

  </div>
</div>

<% } %>

<style>
  .section-header-bar {
    background-color: #e2e8f0;
    padding: 4px 15px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 700;
    font-style: italic;
    color: #4a5568;
    margin-bottom: 10px;
    text-transform: uppercase;
  }

  .action-btn {
    background: #1a202c;
    color: #fff;
    padding: 8px 16px;
    font-size: 14px;
    border-radius: 6px;
  }

  .action-btn-outline {
    border: 1px solid #1a202c;
    padding: 8px 16px;
    font-size: 14px;
    border-radius: 6px;
  }

  @media print {
    .print\:hidden { display: none !important; }
    .bg-gray-200 { background: white !important; }
    .section-header-bar {
      -webkit-print-color-adjust: exact;
      background-color: #e2e8f0 !important;
    }
  }
</style>

<%- include('../partials/footer') %>
